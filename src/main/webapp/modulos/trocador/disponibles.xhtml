<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>Trocador</title>
        <link rel="stylesheet" href="css/style.css"/>
    </h:head>
    <h:body id="bod">
        <p:growl id="messages" showDetail="true"/>
        <h:form >    
            <div class="card">
                <p:tabMenu activeIndex="#{elementosDisponiblesBean.indexactivo}">
                    <p:menuitem id="inicio" value="Inicio" icon="pi pi-fw pi-home" update="content" action="#{elementosDisponiblesBean.setIndexactivo(1)}"/>   
                    <p:menuitem  id="miperfil" value="Mi perfil"  icon="pi pi-fw pi-calendar" update="content" action="#{elementosDisponiblesBean.setIndexactivo(2)}">
                    </p:menuitem>
                    <p:menuitem id="miselementos" value="Mis Elementos"  icon="pi pi-fw pi-pencil" update="content" action="#{elementosDisponiblesBean.setIndexactivo(3)}">
                    </p:menuitem>
                </p:tabMenu>
            </div>          
        </h:form>

        <div class="card product" >
            <h:panelGrid id="content" width="100%">
                <h:form id="form" rendered="#{elementosDisponiblesBean.indexactivo == 1}">
                    <p:messages id="messages"/>
                    <p:dataView var="elemento"  rows="12" paginator="true" value="#{elementosDisponiblesBean.elementosDisponibles}"
                                rowsPerPageTemplate="6,12,16"
                                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                gridIcon="pi pi-th-large" listIcon="pi pi-bars" emptyMessage="No hay productos disponibles">
                        <p:dataViewGridItem>
                            <div class="product-grid-item card border-1">
                                <div class="product-grid-item-top">
                                    <div>
                                        <i class="pi pi-tag product-category-icon"/>
                                        <span class="product-category">#{elemento.idcategoria.nombrecategoria}</span>
                                    </div>
                                    <span class="product-badge">#{elemento.descripcion}</span>
                                </div>
                            </div>
                        </p:dataViewGridItem>

                        <p:dataViewListItem>
                            <div class="product-list-item">
                                <div class="product-list-detail">
                                    <div class="product-name">#{elemento.nombreelemento}</div>
                                    <div class="product-description">#{elemento.descripcion}</div>
                                    <p:rating readonly="true" value="5"/>
                                    <i class="pi pi-tag product-category-icon"/><span
                                        class="product-category">#{elemento.idcategoria.nombrecategoria}</span>
                                </div>
                            </div>
                            <div class="product-list-action">
                                <h:outputText value="#{elemento.elementosdesdeados}" styleClass="product-price"/>
                                <p:commandButton 
                                    value="Ofrecer trueque"
                                    icon="pi pi-shopping-cart"
                                    id="ofrecertrueque"
                                    >
                                </p:commandButton>
                            </div>
                        </p:dataViewListItem>

                    </p:dataView>

                </h:form>

                <h:form rendered="#{elementosDisponiblesBean.indexactivo == 2}">
                    <p:commandButton value="Crear elemento"
                                     icon="pi pi-external-link" 
                                     update="content"
                                     action="#{elementosDisponiblesBean.setIndexactivo(4)}"
                                     id="btnCrearElemento"/>

                    <p:dataView var="elemento"  rows="12" paginator="true" value="#{misElementosBean.elementosDisponibles}"
                                rowsPerPageTemplate="6,12,16"
                                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                gridIcon="pi pi-th-large" listIcon="pi pi-bars" emptyMessage="No hay productos disponibles"
                                id="misElementos"
                                >
                        <p:dataViewGridItem>
                            <div class="product-grid-item-top">
                                <div>
                                    <i class="pi pi-tag product-category-icon"/>
                                    <span class="product-category">#{elemento.idcategoria.nombrecategoria}</span>
                                </div>
                                <span class="product-badge status-#{elemento.esnuevo}">#{elemento.descripcion}</span>
                            </div>
                            <div class="product-grid-item-content">                               
                                <div class="product-name">#{elemento.nombreelemento}</div>
                                <div class="product-description">#{elemento.descripcion}</div>
                                <p:rating readonly="true" value="5"/>
                            </div>

                            <div class="product-grid-item-bottom">
                                <h:outputText value="#{elemento.elementosdesdeados}" styleClass="product-price">                                   
                                </h:outputText>                       
                            </div>

                        </p:dataViewGridItem>

                         <p:dataViewListItem>
                            <div class="product-list-item">
                                <div class="product-list-detail">
                                    <div class="product-name">#{elemento.nombreelemento}</div>
                                    <div class="product-description">#{elemento.descripcion}</div>
                                    <p:rating readonly="true" value="5"/>
                                    <i class="pi pi-tag product-category-icon"/><span
                                        class="product-category">#{elemento.idcategoria.nombrecategoria}</span>
                                </div>
                            </div>
                            <div class="product-list-action">
                                <h:outputText value="#{elemento.elementosdesdeados}" styleClass="product-price"/>
                                
                            </div>
                        </p:dataViewListItem>

                    </p:dataView>

                </h:form>

                <h:form rendered="#{elementosDisponiblesBean.indexactivo == 3}">

                </h:form>

                <h:form rendered="#{elementosDisponiblesBean.indexactivo == 4}">
                    <p:outputLabel value="Nombre"/>
                    <p:inputText value="#{misElementosBean.nuevoElemento.nombreelemento}" id="nombreElemento"/>
                    <br/>
                    <p:outputLabel value="Descripción"/>
                    <p:inputText value="#{misElementosBean.nuevoElemento.descripcion}" id="descripcionElemento"/>
                    <br/>
                    <p:outputLabel value="Estado"/>
                    <p:selectBooleanButton onLabel="Usado" offLabel="Nuevo" 
                                           style="width:6rem" 
                                           value="#{misElementosBean.nuevoElemento.esnuevo}" id="estadoElemento"/>
                    <br/>

                    <p:outputLabel value="Objeto deseado, ingrese los elementos separados por coma"/>
                    <p:inputText value="#{misElementosBean.nuevoElemento.elementosdesdeados}" id="elementoDeseado"/>
                    <br/>
                    <p:outputLabel value="Categoría"/>
                    <div class="field col-12 md:col-4">
                        <p:outputLabel value="Label"/>
                        <p:selectOneMenu id="categorias" value="#{misElementosBean.idCategoria}" 
                                         label="Seleccione una categoría"
                                         alwaysDisplayLabel="true">
                            <f:selectItems value="#{misElementosBean.categorias}" 
                                           var="categoria" itemLabel="#{categoria.nombrecategoria}"
                                           itemValue="#{categoria.idcategoria}"
                                           />
                        </p:selectOneMenu>
                    </div>
                    <br/>
                    <p:commandButton value="Publicar" action="#{misElementosBean.crearElemento()}" id="publicar"
                                     />


                </h:form>

            </h:panelGrid>

        </div>

    </h:body>

</html>
